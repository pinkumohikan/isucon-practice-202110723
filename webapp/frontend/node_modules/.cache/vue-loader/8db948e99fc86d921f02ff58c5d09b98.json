{"remainingRequest":"/opt/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/opt/frontend/src/views/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/opt/frontend/src/views/Search.vue","mtime":1621475513321},{"path":"/opt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/opt/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Router from '@/router.js'\nimport { apiService } from '../services/api.js'\n\nexport default {\n  name: 'search',\n  components: {},\n  data () {\n    return {\n      year: 2020,\n      month: 1,\n      day: 1,\n      hour: 6,\n      minute: 0,\n      train_class: \"全て\",\n      from_station_id: 0,\n      to_station_id: 0,\n      adult: \"1\",\n      child: \"0\",\n      stations: []\n    }\n  },\n  computed: {\n    from_station() {\n      return apiService.getStation(this.from_station_id)\n    },\n    to_station() {\n      return apiService.getStation(this.to_station_id)\n    },\n    usableStations() {\n      var ret = this.stations\n\n      if (this.train_class == \"最速\"){\n        ret = this.stations.filter(station => {\n          return station.is_stop_express;\n        })\n      }\n\n      if (this.train_class == \"中間\"){\n        ret = this.stations.filter(station => {\n          return station.is_stop_semi_express;\n        })\n      }\n\n      if (this.train_class == \"遅いやつ\"){\n        ret = this.stations.filter(station => {\n          return station.is_stop_local;\n        })\n      }\n\n      return ret\n    },\n    train_class_query() {\n      if(this.train_class==\"全て\") {\n        return \"\"\n      }\n      return this.train_class\n    }\n  },\n  methods: {\n    loadStations() {\n      apiService.getStations().then((res) => {\n        console.log(res)\n        this.stations = res\n        this.from_station_id = res[0].id\n        this.to_station_id = res[res.length-1].id\n      })\n    },\n    search() {\n      var query = {\n        year: this.year,\n        month: this.month,\n        day: this.day,\n        hour: this.hour,\n        minute: this.minute,\n        train_class: this.train_class_query,\n        from_station: this.from_station.name,\n        to_station: this.to_station.name,\n        adult: this.adult,\n        child: this.child\n      }\n      Router.push({ path: '/reservation/trains', query: query})\n    }\n  },\n  mounted(){\n    this.loadStations()\n  }\n}\n",null]}